(function(e){"use strict";var t=arguments[arguments.length];if(e["JSON"]==t){throw Error("SPADB requer o objeto global JSON.")}var n={setItem:function(){},getItem:function(){return null},removeItem:function(){},__isMock__:true};var r=e.localStorage||n;var i=e.sessionStorage||n;var s=i;var o=false;var u=function(e){return JSON.stringify(e)};var a=function(e){return JSON.parse(e)};var f={setItem:function(e,t){if(s.__isMock__){return}var n=u(t);s.setItem(e,n)},getItem:function(e){var t=s.getItem(e);if(!s.__isMock__){t=a(t)}return t},removeItem:function(e){s.removeItem(e)}};var l=[];var c=function(e){for(var t=0;t<l.length;t++){var n=l[t];if(n&&n.key&&n.key==e){return t}}return-1};var h=function(e){for(var t=0;t<l.length;t++){var n=l[t];if(n&&n.key&&n.key==e){return m(n.value)}}try{var r=f.getItem(e);if(r!=null){r=m(r)}return r}catch(i){return null}};var p=function(e,t,n){var r=c(e);var i={key:e};if(0>r){l.push(i)}else{i=l[r]}i.value=v(t,n);try{f.setItem(i.key,i.value)}catch(s){}};var d=function(e){var t=c(e);if(0>t){return}l.splice(t,1);try{f.removeItem(e)}catch(n){}};var v=function(e,t){var n={};var r=t&&Array.isArray(t["exclude"])?t["exclude"]:[];for(var i in e){if(r.indexOf(i)>=0){continue}var s="__"+i+"__";var o=e[i];n[s]=o}return n};var m=function(e){var t={};for(var n in e){var r=n.substring(2,n.length-2);var i=e[n];t[r]=i}return t};var g=function(e){if(e!=t){o=e?true:false;if(o){s=r}else{s=i}}return o};e["localDB"]={save:p,read:h,remove:d,persistData:g}})(window)
